<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin-product</title>
    <link rel="stylesheet" href="/public/home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.datatables.net/v/bs5/dt-2.0.3/datatables.min.css" rel="stylesheet">
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.3/js/bootstrap.bundle.min.js" integrity="sha512-7Pi/otdlbbCR+LnW+F7PwFcSDJOuUJB3OxtEHbg4vSMvzvJjde4Po1v4BR9Gdc9aXNUNFVUY+SK51wWT8WF0Gg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <header>
        <div class="container text-center bg-secondary">
            <div class="row p-3 ms-5">
                <div class="col-1"><a  href="/add_product"><button style="color: blue;">add product</button></a></div>
                <div class="col-1"><a href="/"><button style="color: blue;">home</button></a></div>
            </div>
        </div>
    </header>   
            <div class="table-responsive p-5">
                <% if (products && products.length > 0) { %>
                    <table class="table table-striped">
                        <thead>
                            <tr class="table-dark-black" style="background-color: gray;">
                                <th>id</th>
                                <th>image</th>
                                <th>product</th>
                                <th>model</th>
                                <th>BluetoothSP</th>
                                <th>MemoryCardSlotSP</th>
                                <th>ConfigurationSP</th>
                                <th>PowerOutputSP</th>
                                <th>category</th>
                                <th>brand</th>
                                <th>price</th>
                                <th>discount</th>
                                <th>action</th>
                                <th>ColorSP</th>
                                <th>TypeSP</th>
                                <th>WiredWirelessSP</th>
                                <th>HeadphoneJackSP</th>
                                <th>CompatibleDevicesSP</th>
                                <th>BatterySP</th>
                                <th>USBPortsSP</th>
                                <th>BluetoothVersionSP</th>
                                <th>BatteryLifeSP</th>
                                <th>WirelessRangeSP</th>
                                <th>WidthSP</th>
                                <th>HeightSP</th>
                                <th>DepthSP</th>
                                
                                
                            </tr>
                        </thead>
                        <tbody>
                           <% products.forEach((row,index) => { %>
                            <tr class="align-middle">
                                <td><%= index %></td>
                                <td><img src="<%= row.imagePath %>" width="50" class="img-thumbnail" ></td>
                                <td><%= row.product %></td>
                                <td><%= row.model %></td>
                                <td><%= row.BluetoothSP %></td>
                                <td><%= row.MemoryCardSlotSP %></td>
                                <td><%= row.ConfigurationSP %></td>
                                <td><%= row.PowerOutputSP %></td>
                                <td><%= row.category %></td>
                                 <td><%= row.brand %></td>
                                <td><%= row.price %></td>
                                <td><%= row.discountPercentage %></td>
                                <td>
                                    <a href="/edit_product/<%= row._id %>" class="text-sucess"><i class="fas fa-edit fa-lg mx-1"></i></a>
                                    
                                    <a href="/delete_product/<%= row._id %>" class="text-danger"><i class="fas fa-trash fa-lg mx-1"></i></a>

                                    <a href="/block/<%= row._id %>" class="text-warning"><i class="fas fa-stop fa-lg mx-1"></i></a>

                                </td>
                                <td><%= row.ColorSP %></td>
                                <td><%= row.TypeSP %></td>
                                <td><%= row.WiredWirelessSP%></td>
                                <td><%= row.HeadphoneJackSP %></td>
                                <td><%= row.CompatibleDevicesSP %></td>
                                <td><%= row.BatterySP %></td>
                                <td><%= row.USBPortsSP %></td>
                                <td><%= row.BluetoothVersionSP %></td>
                                <td><%= row.BatteryLifeSP %></td>
                                <td><%= row.WirelessRangeSP %></td>
                                <td><%= row.WidthSP %></td>
                                <td><%= row.HeightSP %></td>
                                <td><%= row.DepthSP %></td>
                                
                                
                            </tr>
                          <% }); %>
                        </tbody>
                    </table>
                <% } else { %>
                    <h1 class="text_center text-secondary mt-5">no user found in the database</h1>
                    <% } %>

            </section>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            <script src="https://cdn.datatables.net/v/bs5/dt-2.0.3/datatables.min.js"></script>
            <script>
                $(document).ready(function () {
                    $("table").DataTable({
                        order: [[0, 'desc']] 
                    });
                });
            </script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var truncateElements = document.querySelectorAll('#admintext');
        truncateElements.forEach(function(element) {
            var fullText = element.textContent.trim();
            var truncatedText = fullText.split(' ').slice(0, 10).join(' ') + '...';
            element.textContent = truncatedText;
        });
    });
</script>